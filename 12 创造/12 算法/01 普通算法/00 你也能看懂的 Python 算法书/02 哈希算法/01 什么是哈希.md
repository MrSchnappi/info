---
title: 01 什么是哈希
toc: true
date: 2019-06-26
---
# 可以补充进来的

- 一些减少冲突的方法要补充下。
- hash 主要用在什么地方呢？大量数据的查找？

# 什么是哈希

随着信息技术的迅猛发展，信息的重要性不言而喻，我们常常需要使用搜索引擎来解决日常生活中的大量问题，其中的一项关键技术就是数据查找算法。数据查找已经成为人们日常生活的一部分，因此，如何提高数据查找的效率是软件工程师不断研究的课题。<span style="color:red;">嗯，所有的数据查找算法都要总结下。</span>

## 常见的数据查找算法

常见的数据查找算法一般可分为如下几种，如<span style="color:red;">嗯，不常见的也要总结进来。或者把这个拆分出去</span>

- 顺序查找
- 二分查找
- 深度优先遍历
- 广度优先遍历
- 哈希查找


其中：

- 顺序查找是最简单的查找方式，需要对数据集中的数据逐个进行匹配，所以效率相对较低，不太适合大数据量的查找问题。
- 二分查找的查找效率很高，但是要求数据必须有序，而对数据排序通常需要更多的时间开销。<span style="color:red;">嗯，对于数据进行排序需要耗费很多时间吗？</span>
- 深度优先遍历、广度优先遍历对于大数据量的查找问题效率并不高。<span style="color:red;">为什么对于大数据量的查找问题效率不高？是因为对于树的操作效率不高吗？</span>
- 哈希查找算法由于其查找速度快，查询、插入、删除操作简单等原因而获得了广泛的应用。很多问题本质上都是查找问题。解决查找问题，哈希算法是较好的选择。<span style="color:red;">嗯，是的，说实话，第一次看到 hash 算法当时就想，厉害呀，相当于一种映射关系。</span>

## hash 算法

哈希算法（Hash）是什么呢，哈希算法进行查找的基本原理是根据数据量预先设置一个长度为 M 的数组，使用一个哈希函数 F 并以数据的关键字作为自变量，得到唯一的返回值，返回值的范围为 0~M-1 ，这样就可以利用哈希函数 F 将数据元素映射到数组的某一位下标并把数据存放在对应位置上。查找时，利用哈希函数 F 计算该数据应该存储在哪里，再到相应的存储位置取出查找的数据。

例如，有一组数据 3、11、8、6 需要存储，哈希函数为 F(x)=x%7，那么利用哈希函数 F 存储的数据如表所示：

<center>

![](http://images.iterate.site/blog/image/20190626/UXW7ltrrl0NT.png?imageslim){ width=55% }
</center>

按照统一的哈希函数存储数据，也按照统一的哈希函数查找数据，按照这种方法查找数据，理论上可以达到常数级别的查找效率。<span style="color:red;">嗯。</span>

就像在生活中，要想时刻能够找到自己的东西，最好的办法就是把东西放到固定的地方，每次需要它的时候就去相应的地方找，用完以后再放回原处。哈希是一种高效的存储算法，也是一种高效查找算法。

哈希就像一本字典，当你需要查词的时候，通过目录找到页码，再到对应页码就能找到所需要的内容了。

一般情况下，哈希算法的查询效率可以达到常数级别，哈希表成为直接寻址的有效替代方案。然而由于关键字的取值可能在一个很大的范围，数据在通过哈希函数进行映射的时候，很难找到一个哈希函数，使得这些关键字不能映射到唯一的值，就会出现多个关键字映射到同一个值的现象，这种现象我们称为冲突。<span style="color:red;">是的，冲突。</span>

这就对哈希函数的设计提出了更高的要求，如果哈希函数设计得不好，查询效率可能会降低为顺序查找的效率。

找到绝对完美的、没有任何冲突的哈希算法也是较困难的，对于特定的数据集，好的哈希算法也是少之又少，因此如果想高效地解决哈希冲突，降低解决哈希冲突时的查询长度也是一个要重点考虑的方面。<span style="color:red;">什么是，对于特定的数据集，好的哈希算法也是少之又少？hash 函数有多少种？对于某种情况的数据集来说，怎么选择对应的 hash 函数使得冲突最少？降低冲突时候的查询长度，嗯，也挺厉害的。</span>

## 解决 hash 冲突的方法

解决哈希冲突的方法有很多，如：

- 链地址法
- 二次再散列法
- 线性探测再散列
- 建立一个公共溢出区
- 等

本章主要介绍哈希算法的应用，因此只对链地址法进行讲解。<span style="color:red;">其他的所有方法都要总结下，没准什么时候就使用到了呢？</span>

链地址法处理冲突的方法本质上是一种数组加链表的处理方法，当发生多个数据通过哈希函数映射后得到相同的哈希值时，通常把具有相同哈希地址的关键字放在同一个链表中，称该链表为同义词链表，该链表也被称为桶。<span style="color:red;">我擦，同义词链表、桶！这个链表竟然就是桶！真的吗？以前看到的桶就是这个吗？那么这个链表放在那里呢？</span>

当把相同哈希地址的关键字数据都放在同一个链表中时，有 `N` 个哈希地址就有 `N` 个链表。同时，用数组 `Hash[0..N-1]` 存放每个链表的头指针，之后把哈希地址为 `i` 的数据全部以节点的方式插入对应的链表里，如图所示：<span style="color:red;">这句话没明白？什么叫吧哈希地址为 `i` 的数据全部以节点的方式插入对应的链表中？</span>

<center>

![](http://images.iterate.site/blog/image/20190626/GLlUNEDrMKRe.png?imageslim){ width=55% }
</center>

链地址法处理冲突注意：链地址法本质上是数组+链表的数据结构。

链地址法存储数据的过程是这样的，首先建立一个数组 Hash 存储所有链表的头指针，由数据的关键字 Key 通过对应的哈希函数计算出哈希地址，找到相应的桶号，之后建立新的节点存储该数据，并把节点放到桶内链表的最后面或者最前面。

和存储数据的方法类似，查找数据的时候，也是由数据的关键字通过哈希函数计算关键字对应的哈希地址，之后顺序比较桶的内部节点是否与所查找的关键字一样直到找到数据为止。<span style="color:red;">哎？这个计算出来的 hash 关键字不是相同的吗？怎么还能比较桶的内部节点的？</span>如果全部节点都不和关键字一样，则说明哈希表里没有该数据。这个解决冲突的方法对哈希函数的要求很高，如果哈希函数选得不太好的话，哈希表的查找效率会退化为链表的查找，也就是顺序查找。<span style="color:red;">嗯，还是有点美很清楚，之前的理解是：</span>

用链地址法构造的散列表，插入和删除节点操作易于实现，所以构造链表的时间开销很低，但是指针需要开辟额外的地址空间，当数据量很大时，会扩大哈希表规模，内存空间需求较大。<span style="color:red;">嗯。</span>

从上面的分析可以看到，构造优秀的哈希函数和选择解决冲突的方法是哈希查找算法的关键。不管多么高明的算法都不可能避免冲突问题，但是构建计算简单、高效快速，并且能够将关键字集合均匀地分布在地址集中，使得冲突达到最小，一直是计算机科学家追求的目标。<span style="color:red;">嗯，还是要补充下，感觉理解的不是很深，虽然之前看过这方面的视频，感觉这个地方讲的有点不对应。。</span>




# 相关

- 《你也能看得懂的 python 算法书》
