---
title: 2.17 计算 AUC
toc: true
date: 2019-09-03
---

### 2.16.14 如何计算 AUC

- 将坐标点按照横坐标 FPR 排序 。
- 计算第 $i$ 个坐标点和第 $i+1$ 个坐标点的间距 $dx$ 。
- 获取第 $i$ 或者 $i+1$ 个坐标点的纵坐标 $y$。
- 计算面积微元 $ds=ydx$。
- 对面积微元进行累加，得到 AUC。

<span style="color:red;">是的。</span>

### 2.16.16 直观理解 AUC
​
下图展现了三种 AUC 的值：

<center>

![](http://images.iterate.site/blog/image/20190722/zhjXewlQ7pTe.png?imageslim){ width=55% }

</center>


​**AUC 是衡量二分类模型优劣的一种评价指标，表示正例排在负例前面的概率。** 其他评价指标有精确度、准确率、召回率，而 AUC 比这三者更为常用。

一般在分类模型中，预测结果都是以概率的形式表现，如果要计算准确率，通常都会手动设置一个阈值来将对应的概率转化成类别，这个阈值也就很大程度上影响了模型准确率的计算。

举例：

现在假设有一个训练好的二分类器对 10 个正负样本（正例 5 个，负例 5 个）预测，得分按高到低排序得到的最好预测结果为 $[1, 1, 1, 1, 1, 0, 0, 0, 0, 0]$，即 5 个正例均排在 5 个负例前面，正例排在负例前面的概率为 100%。然后绘制其 ROC 曲线，由于是 10 个样本，除去原点我们需要描 10 个点，如下：

<center>

![](http://images.iterate.site/blog/image/20190722/NzswJpnT2Eww.png?imageslim){ width=55% }

</center>


​描点方式按照样本预测结果的得分高低从左至右开始遍历。从原点开始，每遇到 1 便向 $y$ 轴正方向移动 $y$ 轴最小步长 1 个单位，这里是 1/5=0.2；每遇到 0 则向 $x$ 轴正方向移动 $x$ 轴最小步长 1 个单位，这里也是 0.2。不难看出，上图的 AUC 等于 1，印证了正例排在负例前面的概率的确为 100%。

​假设预测结果序列为 $[1, 1, 1, 1, 0, 1, 0, 0, 0, 0]$。

<center>

![](http://images.iterate.site/blog/image/20190722/Yq5vwVM8rQom.png?imageslim){ width=55% }

</center>


​计算上图的 AUC 为 0.96 与计算正例与排在负例前面的概率 0.8 × 1 + 0.2 × 0.8 = 0.96相等，而左上角阴影部分的面积则是负例排在正例前面的概率 0.2 × 0.2 = 0.04。

​假设预测结果序列为 $[1, 1, 1, 0, 1, 0, 1, 0, 0, 0]$。

<center>

![](http://images.iterate.site/blog/image/20190722/qWGxky3R8qU6.png?imageslim){ width=55% }

</center>

计算上图的 AUC 为 0.88与计算正例与排在负例前面的概率 0.6 × 1 + 0.2 × 0.8 + 0.2 × 0.6 = 0.88相等，左上角阴影部分的面积是负例排在正例前面的概率 0.2 × 0.2 × 3 = 0.12。
