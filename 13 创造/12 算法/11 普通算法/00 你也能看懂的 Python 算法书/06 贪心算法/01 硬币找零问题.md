---
title: 01 硬币找零问题
toc: true
date: 2019-07-01
---
7.1 硬币找零问题
我们来看一个用最少硬币支付指定额度的问题。
7.1.1 问题描述
如图 7.1所示，设有 6 种不同面值的硬币，各硬币的面值分别为 5 分、1角、2角、5角、1元和 2 元。现要用这些面值的硬币来购物和找钱。购物时规定了可以使用的各种面值的硬币个数。
图 7.1 硬币
假定商店里各面值的硬币足够多，顾客也可用多种方式支付。在一次购物中希望使用最少硬币个数。举一个例子，一名顾客需要付款 0.55元，但她身上没有 5 角的硬币。图 7.2展示了一种情况：顾客用 0.2+0.2+0.1+0.05共 4 枚硬币来付款。
图 7.2 方案一
图 7.3展示了另一种情况，顾客付出 1 元，商店找回 4 角 5 分。这个情况同样需要 4 枚硬币。
图 7.3 方案二
图 7.4展示了最佳情况。如果顾客付出 1.05元（1枚 1 元和 1 枚 5 分），商店找回 5 角，整个过程只需要 3 枚硬币。这个方案用的硬币个数最少。
图 7.4 最佳方案
现在问题来了，对于给定的各种面值的硬币个数和付款金额，如何计算使用硬币个数最少的交易方案。
其核心思想为消费者硬币数量有限，商店的硬币无限。因此问题可以用以下公式来描述：
MIN（消费者支付硬币数量+商店找零硬币数量）
支付值-找零值=商品值
对问题的求解转换为寻找上面两个问题的最优解。
这里所用的贪心算法为：MAX（消费者拥有的硬币面值-商店拥有的硬币面值）优先使用。
例如消费者拥有面值为 2 元的硬币，商店拥有 5 分的硬币，因此 MAX=2元-5分=195分。那么上面所有的组合情况为：
2元（不找零的情况）,2元-5分，2元-1角，……,5分（不找零的情况）
现在假如购买的商品是 2 元，那么在上面的组合中使用 2 元优先，只用 1 个硬币即可；假如商品是 2 元 9 角 5 分，从上面的序列中使用贪心算法来选择，那么就是一枚 2 元的硬币优先，那么 9 毛 5 如何处理呢，因为上面的序列中存在“1元-5分”的情况，这是能够使用的最大币值（贪心），就用它了，那么它是 2 枚硬币，即支付 1 元找零 5 分，总共用了 3 枚硬币。
接下来验证这个算法的贪心选择性和最优子结构性质，证明贪心算法可以获得最优解。


贪心选择性：用贪心策略的选择替代原来的选择，如果能获得更优解或同优解，那么贪心策略就可以获得最优解。
我们把相应的序列列出来（用“分”来表示）：
C[]={200,195,190,180,150,100,95,90,80,50,45,40,30,20,15,10,5}；
证明这个序列具有贪心选择性质即可，这里我们先用一个简单的例子来证明。
c[]={10,5,2,1}，这里，c[i]的出现次数最多为｛n,1,2,1｝，这样才能得到最优解，因为面值为 1 的次数为 2 时，可以用一个面值为 2 的来代替，硬币使用数就少了，那么就可以获得更优解。面值为 2 的硬币只能选用 2 个，若选用了 3 个，可以用 1 枚面值为 5 和一枚面值为 1 的硬币来代替。概括来讲，如果 c[i]超过一定数量，可以用更少的 c[i-1]来代替，因此，优先选择大的面值的话，就会用更少的硬币数，因此满足贪心选择性质。
这里回归到问题的序列 C[]，容易看出，C[i]总可以用更大的 C[i-1]或者配合一些小币值来代替，但是数量<=C[i]的使用数量，因此满足贪心选择性质。当然在这个过程中要考虑消费者硬币是否足够的问题。
最优子结构的性质证明：设 s[i]为各硬币使用数量，S[i]是商品价格为 n 时的最优解，硬币数为 K。现在设某面值的硬币数量减 1:S[j]=S[j]-1；则新的 S[i]是 n-c[j]的最优解，硬币数为 k-1，否则，设 T[i]是 n-c[j]的最优解，硬币数为 m，即 m<k-1；那么对于 n 来说，T[i]的硬币数加 1 应该是最少的硬币数，即 m+1<k-1+1=k，与 k 是最少硬币数矛盾，故问题满足最优子结构性质。
7.1.2 最终代码
找零问题的代码如代码 7.1所示。
代码 7.1 找零问题的贪心算法求解
7
