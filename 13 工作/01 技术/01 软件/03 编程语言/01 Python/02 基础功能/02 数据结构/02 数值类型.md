# 数值类型

（一些属于 math 的拆分出去）


## 数值类型

特点：

- 不允许改变。如果改变数字数据类型的值，将重新分配内存空间。


数值类型：

- 整型 Int
  - 没有限制大小，Python2 的 Long 类型也汇到 int 里。
- 浮点型 float
  - 由整数部分与小数部分组成
  - 可以使用科学计数法表示（`2.5e2 = 2.5 x 10^2 = 250`）
- 复数 complex numbers
  - 复数的虚部以字母 `J` 或 `j` 结尾 。如：`2+3j`


举例：

```py
a=3
print(a)
print(type(a))

a=2.5e+2
print(a)
print(type(a))

a=2+3j
print(a)
print(type(a))
```

输出：

```txt
3
<class 'int'>
250.0
<class 'float'>
(2+3j)
<class 'complex'>
```



## 整数 int

特点：

- 没有大小限制。
- 可以用十六进制或二进制表示整数，如：`0b011`,`0xf1` 。这些都是 int 类型。

注意：

- 由于没有大小限制，与 c++ 转化时注意。


### 操作


**取整：**

举例：

```python
a = 3.75
print(int(3.75))
print(round(3.25))
print(round(4.85))
import math
print(math.ceil(3.25))
```

输出：

```
3
3
5
4
```

说明：

- `int` 向下取整
- `round` 四舍五入
- `math.ceil` 向上取整

注意：

- 这些输出的都是 int 格式的。


**取数字的整数部分和小数部分：**

举例：

```py
import math

a = math.modf(3.25)
print(a)
print(type(a[0]))
print(type(a[1]))

a = math.modf(4.2)
print(a)
```

输出：

```
(0.25, 3.0)
<class 'float'>
<class 'float'>
(0.20000000000000018, 4.0)
```

说明：

- `math` 模块中的 `modf()` 可以获取数字的整数部分和小数部分，该方法返回一个元组。返回的元组是`（小数，整数）` 的样式。
- 都是 float 格式的。

注意：

- 为什么是 0.20000000000000018 。在计算机中浮点数是无法精确的，所以得到的是 0.2 在计算中的近似表示。<span style="color:red;">还有点没有清楚</span>


**位运算：**

- <<
- &
- |
- ^

举例：

```py
print(1<<4)
print(0b1101&0b1011)
print(0b1101|0b1011)
print(0b1101^0b1011)
```

输出：

```
16
9
15
6
```

## 浮点数


IEEE 754 的特殊值是 NaN, inf, -inf。（没有很清楚）

Python 的浮点数没有大小限制，但是超出一定范围就直接表示为`inf`（无限大）。

举例：

```py
a=-1e100000000
b=1e10000000
print(a)
print(b)
print(a/b)
print(b/a)

print('---')
a=1e1000
b=1e100
print(a)
print(b)
print(a/b)
print(b/a)
```

输出：

```
-inf
inf
nan
nan
---
inf
1e+100
inf
0.0
```

说明：（没有很确定）

- 两个 inf 相除，得到 nan
- 一个值除以 inf，得到 0.0
- 一个 inf 除以一个值，得到 inf


### 浮点数的存储误差及问题


浮点数的存储：

- 不管什么数，在计算机中最终都会被转化为 0 和 1 进行存储。
- 浮点数二进制表示：整数部分对 2 取余然后逆序排列，小数部分乘 2 取整数部分，然后顺序排列。
  - 举例：0.1 的二进制：
    ```txt
    0.1 * 2 = 0.2 整数部分取 0
    0.2 * 2 = 0.4 整数部分取 0
    0.4 * 2 = 0.8 整数部分取 0
    0.8 * 2 = 1.6 整数部分取 1
    0.6 * 2 = 1.2 整数部分取 1
    0.2 * 2 = 0.4 整数部分取 0
    ```
    因此，0.1 的二进制表示为 0.00011001100110011001100110011……0011
- 由 0.1 的二进制表示，这就引出了一个问题，暂时没办法存放整个浮点数。
- 因此，暂时与 C++ 一样采用 [IEEE 754](https://people.eecs.berkeley.edu/~wkahan/ieee754status/IEEE754.PDF) 规范来存储浮点数：
  - 对双精度浮点数的存储规范将 64 bit 分为 3 部分：
    - 第 1 bit 位用来存储符号，决定这个数是正数还是负数
    - 然后使用 11 bit 来存储指数部分
    - 剩下的 52 bit 用来存储尾数。
    <p align="center">
        <img width="70%" height="70%" src="http://images.iterate.site/blog/image/20191109/qnPub6MMS3y3.png?imageslim">
    </p>
- 这种存储方法，可以看到，能代表的数必然不超过 2^64 个，那么现实世界上有无限个小数，所以计算机能做的只能是一个接近这个小数的值，是这个值在一定精度下与逻辑认为的值相等。换句话说，每个小数的存储(但是不是所有的)，都会伴有精度的丢失。
- 由于浮点数的存储误差，所以，会出现计算上的问题：

    举例：

    ```py
    print(0.1+0.2)
    print(0.1+0.2==0.3)
    ```

    输出：

    ```
    0.30000000000000004
    False
    ```

    原因：

    - 0.1 在计算机存储中真正的数字是 0.1000000000000000055511151231257827021181583404541015625
    - 0.2 是 0.200000000000000011102230246251565404236316680908203125
    - 0.3 是 0.299999999999999988897769753748434595763683319091796875
    - 这就是为什么 0.1 + 0.2 != 0.3。
- 既然0.1 + 0.2 != 0.3，怎么判断两个浮点数是不是相等呢？
  - 原则：
    - 只能用 `>` `<` 不可用 `==`
    - 如果需要判断是否相等，可以用 `math.isclose(a,b)` 或者 `abs(a-b) < 1.0e-9`



疑问：

- 银行的计算是怎么做的？
- 除法作为计算中间步骤也是精确的吗？还是有误差的？



## 数字类型转换


- `int(x [,base ]) `        将 x 转换为一个整数
- `float(x )`               将 x 转换到一个浮点数
- `complex(real [,imag ])`  创建一个复数
- `str(x ) `                将对象 x 转换为字符串
- `repr(x )`                将对象 x 转换为表达式字符串
- `eval(str )`              用来计算在字符串中的有效 Python 表达式，并返回一个对象
- `tuple(s )`               将序列 s 转换为一个元组
- `list(s )`                将序列 s 转换为一个列表
- `chr(x )`                将一个整数转换为一个字符
- `unichr(x )`              将一个整数转换为 Unicode 字符
- `ord(x )`                 将一个字符转换为它的整数值
- `hex(x )`                 将一个整数转换为一个十六进制字符串
- `oct(x )`                 将一个整数转换为一个八进制字符串




## 数学函数



|    函数                                                          |      返回值 ( 描述 )                                                         |
| ------------------------------------------------------------ | ------------------------------------------------------------ |
| `abs(x)` | 返回数字的绝对值，如 abs(-10) 返回 10                        |
| `ceil(x)` | 返回数字的上入整数，如 math.ceil(4.1) 返回 5                 |
| `cmp(x, y)`| 如果 x < y 返回 -1, 如果 x == y 返回 0, 如果 x > y 返回 1    |
| `exp(x)` | 返回 e 的 x 次幂(ex)，如 math.exp(1) 返回 2.718281828459045  |
| `fabs(x)` | 返回数字的绝对值，如 math.fabs(-10) 返回 10.0                |
| `floor(x)` | 返回数字的下舍整数，如 math.floor(4.9)返回 4                 |
| `log(x)` | 如 math.log(math.e)返回 1.0,math.log(100,10)返回 2.0         |
| `log10(x)` | 返回以 10 为基数的 x 的对数，如 math.log10(100)返回 2.0      |
| `max(x1, x2,...)` | 返回给定参数的最大值，参数可以为序列。                       |
| `min(x1, x2,...)` | 返回给定参数的最小值，参数可以为序列。                       |
| `modf(x)` | 返回 x 的整数部分与小数部分，两部分的数值符号与 x 相同，整数部分以浮点型表示。 |
| `pow(x, y)` | x**y 运算后的值。                                            |
| [round(x `,n])` | 返回浮点数 x 的四舍五入值，如给出 n 值，则代表舍入到小数点后的位数。 |
| `sqrt(x)` | 返回数字 x 的平方根，数字可以为负数，返回类型为实数，如 math.sqrt(4)返回 2+0j |


## 随机函数

（是不是放在标准库里，还是放在别的地方，是属于 math 的吗？）


|                                               函数               |      描述                                                        |
| ------------------------------------------------------------ | ------------------------------------------------------------ |
| `choice(seq)` | 从序列的元素中随机挑选一个元素，比如 random.choice(range(10))，从 0 到 9 中随机挑选一个整数。 |
| `[randrange ([start,] stop ,step])` | 从指定范围内，按指定基数递增的集合中获取一个随机数，基数缺省值为 1 |
| `random()` | 随机生成下一个实数，它在[0,1)范围内。                        |
| `seed([x])` | 改变随机数生成器的种子 seed。如果你不了解其原理，你不必特别去设定 seed，Python会帮你选择 seed。 |
| `shuffle(lst)` | 将序列的所有元素随机排序                                     |
| `uniform(x, y)` | 随机生成下一个实数，它在[x,y]范围内。                        |




## 三角函数



|    函数                                                          |   描述                                                   |      |
| ------------------------------------------------------------ | ---------------------------------------------------- | ---- |
| `acos(x)` | 返回 x 的反余弦弧度值。                              |      |
| `asin(x)` | 返回 x 的反正弦弧度值。                              |      |
| `atan(x)` | 返回 x 的反正切弧度值。                              |      |
| `atan2(y, x)` | 返回给定的 X 及 Y 坐标值的反正切值。                 |      |
| `cos(x)` | 返回 x 的弧度的余弦值。                              |      |
| `hypot(x, y)` | 返回欧几里德范数 sqrt(x*x + y*y)。                   |      |
| `sin(x)` | 返回的 x 弧度的正弦值。                              |      |
| `tan(x)` | 返回 x 弧度的正切值。                                |      |
| `degrees(x)` | 将弧度转换为角度，如 degrees(math.pi/2) ， 返回 90.0 |      |
| `radians(x)` | 将角度转换为弧度                                     |      |




## 数学常量


- pi 圆周率，一般以π来表示
- e  即自然常数
