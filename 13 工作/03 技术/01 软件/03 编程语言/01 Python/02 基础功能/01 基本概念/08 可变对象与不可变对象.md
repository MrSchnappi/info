
# 可以补充进来的

- 怎么设计成不变对象？class 也可以是不变对象吗？


# 可变对象与不可变对象

str 是不变对象，而 list 是可变对象。

对于可变对象，比如 list，对 list 进行操作，list 内部的内容是会变化的，比如：

```python
a = ['c', 'b', 'a']
a.sort()
print(a)

a = 'abc'
b = a.replace('a', 'A')
print(a)
print(b)
```

输出：

```
['a', 'b', 'c']
abc
Abc
```

说明：

- 虽然字符串有个`replace()`方法，但 `replace`方法是创建了一个新字符串`'Abc'`并返回，变量`a` 仍是`'abc'`。
- 而 list 上的操作是对原对象进行操作。


所以，对于不变对象来说，调用对象自身的任意方法，也不会改变该对象自身的内容。相反，这些方法会创建新的对象并返回，**这种机制保证了不变对象本身永远是不变的。**

## 为什么要设计不变对象

为什么要设计`str`、`None`这样的不变对象呢？

因为：

- 减少了由于修改数据导致的错误：不变对象一旦创建，对象内部的数据就不能修改，这样就减少了由于修改数据导致的错误。
- 同时读取无需加锁：由于对象不变，多任务环境下同时读取对象不需要加锁，同时读一点问题都没有。


**我们在编写程序时，如果可以设计一个不变对象，那就尽量设计成不变对象。**<span style="color:red;">怎么设计成不变对象？class 也可以是不变对象吗？</span>


# 相关

- [使用 dict 和 set](https://www.liaoxuefeng.com/wiki/0014316089557264a6b348958f449949df42a6d3a2e542c000/00143167793538255adf33371774853a0ef943280573f4d000)
