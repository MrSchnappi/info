# 可以补充进来的

## 自动驾驶与人工智能

自动驾驶的支撑技术可以分为以下 3 层：


- 上层控制：路线规划，交通分析，交通安排。
- 中层控制：物体识别，路障监测，遵守交规。
- 底层控制：巡航控制，防抱死，电子系统控制牵引力，燃油喷射系统，引擎调谐。

其中每一层都可以用到人工智能技术。<span style="color:red;">哇塞！</span>

图 14.26将人工智能的算法与其在自动驾驶中的应用场景做了一个映射：<span style="color:red;">符号推理是什么？</span>

<center>

![](http://images.iterate.site/blog/image/20190427/HXWHHrpMqF9i.png?imageslim){ width=55% }

</center>

以下简要介绍中层控制中，路障监测用到两个重要的工具 “占据栅格” 和 “不确定性锥”。

**占据栅格**

占据栅格是一个存储了汽车周围实体对象信息的数字存储库。占据栅格中的实体，一些是源于已经存储的高清地图的静止物体，另一些是汽车根据传感器的实时信号识别出的移动物体。通常使用彩色编码和图标，来可视化那些经常出现的物体所对应的占据栅格。<span style="color:red;">嗯，占据栅格是怎么做到的？</span>

图 14.27是谷歌无人车在一个十字路口，根据传感器数据进行物体识别所得到的占据栅格，叠加显示在高精度地图上。

<center>

![](http://images.iterate.site/blog/image/20190427/acvaqErXEjfL.png?imageslim){ width=55% }

</center>

有了占据栅格就知道物体当前时刻的位置。显然这还不够，自动驾驶汽车还需要知道物体在未来 $t$ 时间可能出现在哪些位置。

**不确定性锥**

不确定性锥就是用来预测汽车附近物体的位置和移动速度的工具。一旦基于深度学习的物体识别模块标记了一个物体，占据栅格就会显示出它的存在，不确定性锥就会预测物体下一步的运动方向。<span style="color:red;">嗯嗯，挺好的。</span>

不确定性锥为无人驾驶汽车提供了人工智能版的场景理解能力。当人类司机看到行人站得离汽车太近，他就会在脑海中思考要转向避开；在无人驾驶汽车中，利用不确定性锥技术也会进行类似的“脑海思考”。像是消防栓这样静止的物体，会用一个瘦小的圆锥体表示，因为它基本不大可能会移动。相比之下，快速移动的物体会用一个宽大的圆锥体表示，因为它可能运动到的地方比较多，所以它将来的位置是不确定的。<span style="color:red;">嗯嗯。</span>

人类驾驶员并不会在脑海中将附近的每一个物体清晰地标记成椭圆锥体。然而，不确定性锥与人类潜意识中的处理过程是大致相同的。我们的大脑不断记录更新着周围出现的人和物体，结合以往的经验和眼前事物的状态，我们能猜测出这些周边事物的意图并预测出它们下一步会做什么。

中层控制软件按照如下方法创建不确定性锥：首先，在平面上画出一个物体，在物体周围画一个小圆圈，我们称它为“当前活动圈”；然后，再画一个大圆圈，标记出未来 10 秒后物体可能会到达的

所有位置，被称为“未来活动圈”。最后，用两条线把小圆和大圆的边缘连接起来。这就是不确定性锥。<span style="color:red;">嗯。挺好的。</span>

不确定性锥替代了人类驾驶员与行人之间的眼神交流作用。从无人驾驶汽车的视角来看：

- 一个站在路边面向街道的行人会用稍微向前倾斜的锥体表示，表明她随时可能穿过街道。
- 如果她的眼睛不是盯着前方，而是盯着手机，她的锥体图标则是另一种形状，或许更加窄小，因为她并没有准备好继续前进。
- 如果她扫视了一眼无人驾驶汽车，她的锥体图标将进一步缩小，因为汽车的软件会识别到她看见了这辆车，也就不太可能挡在汽车的前进路线上。<span style="color:red;">这也可以吗？真实场景中真的是这么做的吗？嗯想详细了解下这个的实现。</span>

越不可预知的行人，锥体的形状就越大。摇摆不定的自行车骑行者比静止的行人有更大的不确定性，相应的锥体也就更大。四处乱撞的小狗或追着球跑的孩子，则会用更大的锥体表示。<span style="color:red;">嗯。</span>

有时，即使一个静态的目标也可能会用一个大号锥体表示其不确定性，比如具有遮蔽性的建筑，虽然它们本身不大可能移动，但是可能会遮蔽一些移动的物体。<span style="color:red;">嗯嗯，没想到。</span>

对于死胡同、转弯处，或随时可能会有乘客下车的一辆停在路边敞开车门的汽车，无人驾驶汽车的中层软件系统都会标记一个大号的不确定性锥。

静止的校车也可能会产生不确定的大圆锥，虽然校车本身或许不动，但是随时都可能有孩子从车后跑出来。<span style="color:red;">是的。</span>


当汽车附近的物体都被标记并表示成了大小不一的不确定性锥，一个称为 ”轨迹规划器” 的模块，就能据此计算出最佳行进路线（见图 14.28），并保证遵守交通规则，减少行程时间和碰撞风险。<span style="color:red;">厉害厉害，轨迹规划器是怎么做到的？怎么根据这些不确定性锥得到最佳行进路线的？</span>

<center>

![](http://images.iterate.site/blog/image/20190427/JNK4TMOVwSmg.png?imageslim){ width=55% }

</center>


