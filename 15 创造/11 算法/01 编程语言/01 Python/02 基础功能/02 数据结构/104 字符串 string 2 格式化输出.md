---
title: 104 字符串 string 2 格式化输出
toc: true
date: 2019-11-17
---

# 格式化输出

Python 支持格式化字符串的输出 。尽管这样可能会用到非常复杂的表达式，但最基本的用法是将一个值插入到一个有字符串格式符 %s 的字符串中。


表格：

| 符号 | 描述 |
| ---- | ------------------------------------ |
| %c   | 格式化字符及其 ASCII 码              |
| %s   | 格式化字符串                         |
| %d   | 格式化整数                           |
| %u   | 格式化无符号整型                     |
| %o   | 格式化无符号八进制数                 |
| %x   | 格式化无符号十六进制数               |
| %X   | 格式化无符号十六进制数（大写）       |
| %f   | 格式化浮点数字，可指定小数点后的精度 |
| %e   | 用科学计数法格式化浮点数             |
| %E   | 作用同%e，用科学计数法格式化浮点数   |
| %g   | %f和%e的简写                         |
| %G   | %f 和 %E 的简写                      |
| %p   | 用十六进制数格式化变量的地址         |


格式化操作符辅助指令：


| 符号 | 功能 |
| ----- | ------------------------------------------------------------ |
| *     | 定义宽度或者小数点精度                                       |
| -     | 用做左对齐                                                   |
| +     | 在正数前面显示加号( + )                                      |
|       | 在正数前面显示空格                                           |
| #     | 在八进制数前面显示零('0')，在十六进制前面显示'0x'或者'0X'(取决于用的是'x'还是'X') |
| 0     | 显示的数字前面填充'0'而不是默认的空格                        |
| %     | '%%'输出一个单一的'%'                                        |
| (var) | 映射变量(字典参数)                                           |
| m.n.  | m 是显示的最小总宽度,n 是小数点后的位数(如果可用的话)        |

最后一个常见的问题是如何输出格式化的字符串。我们经常会输出类似`'亲爱的 xxx 你好！你 xx 月的话费是 xx，余额是 xx'`之类的字符串，而 xxx 的内容都是根据变量变化的，所以，需要一种简便的格式化字符串的方式。

![](http://images.iterate.site/blog/image/20181206/FwQ2C9BLRB0K.png?imageslim){ width=55% }

在 Python 中，采用的格式化方式和 C 语言是一致的，用 `%` 实现，举例如下：

```py
print('Hello, %s' % 'world')
'Hello, world'
print('Hi, %s, you have $%d.' % ('Michael', 1000000))
'Hi, Michael, you have $1000000.'
```

<span style="color:red;">嗯，这个还是比较不错的，我之前不熟悉这个，总是使用字符串的拼接，没有这个好。</span>

你可能猜到了，`%` 运算符就是用来格式化字符串的。在字符串内部，`%s` 表示用字符串替换，`%d` 表示用整数替换，有几个 `%?`占位符，后面就跟几个变量或者值，顺序要对应好。如果只有一个 `%?` ，括号可以省略。

常见的占位符有：<span style="color:red;">是的，一直不是很想用，就是因为这个占位符记得不是很清楚。</span>

| 占位符 | 替换内容     |
| ------ | ------------ |
| %d     | 整数         |
| %f     | 浮点数       |
| %s     | 字符串       |
| %x     | 十六进制整数 |

其中，格式化整数和浮点数还可以指定是否补 0 和整数与小数的位数：

```py
print('%2d-%02d' % (3, 1))
print('%.2f' % 3.1415926)
```
输出：

```
 3-01
3.14
```

<span style="color:red;">注意，输出的 3-01 前面是有一个空格的。</span>


如果你不太确定应该用什么，`%s`永远起作用，它会把任何数据类型转换为字符串：<span style="color:red;">嗯，不过为了精确，前面的占位符还是要记住的。</span>

```py
print('Age: %s. Gender: %s' % (25, True))
```

输出：

```
'Age: 25. Gender: True'
```


有些时候，字符串里面的`%`是一个普通字符怎么办？这个时候就需要转义，用`%%`来表示一个`%`：<span style="color:red;">嗯。</span>

```py
print('growth rate: %d %%' % 7)
```

```
'growth rate: 7 %'
```


### format()

另一种格式化字符串的方法是使用字符串的 `format()` 方法，它会用传入的参数依次替换字符串内的占位符`{0}`、`{1}`……，不过这种方式写起来比%要麻烦得多：<span style="color:red;">一般什么时候使用这种你 format 格式？</span>

```py
print('Hello, {0}, 成绩提升了 {1:.1f}%'.format('小明', 17.125))
```

```
'Hello, 小明, 成绩提升了 17.1%'
```




## 字符串输出模板

字符串的模板，或叫做格式化，是一个很重要的课题。


有一个 format 方法：


```py
a = '{0:.2f} {1:s} are worth US${2:d}'
b = a.format(4.5560, 'Argentine Pesos', 1)
print(a)
print(b)
```

输出：

```
{0:.2f} {1:s} are worth US${2:d}
4.56 Argentine Pesos are worth US$1
```

在这个 string 中：

- `{0:.2f}` : 第一个参数为 float 类型，去小数点后两位
- `{1:s}`: 把第二个参数变为 string 类型
- `{2:d}`: 把第三个参数变为一个精确的整数

<span style="color:red;">挺好用的。再补充一些。</span>




# 相关

- [字符串和编码](https://www.liaoxuefeng.com/wiki/0014316089557264a6b348958f449949df42a6d3a2e542c000/001431664106267f12e9bef7ee14cf6a8776a479bdec9b9000)
