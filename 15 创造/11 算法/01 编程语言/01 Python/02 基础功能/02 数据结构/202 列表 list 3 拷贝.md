---
title: 202 列表 list 3 拷贝
toc: true
date: 2019-11-17
---

# 拷贝


## 普通的赋值

```py
listb=lista
```

注意，这个并不是一个copy的过程，这里 lista 与 listb 完全等同。


## 列表的拷贝


```py
import copy

a = [[10], 20]

b = a[:]
c = list(a)
d = a * 1
e = copy.copy(a)
f = copy.deepcopy(a)

a.append(21)
a[0].append(11)

print(id(a), a)

print(id(b), b)
print(id(c), c)
print(id(d), d)
print(id(e), e)
print(id(f), f)
```

输出：

```text
1886551599112 [[10, 11], 20, 21]
1886551600328 [[10, 11], 20]
1886551691912 [[10, 11], 20]
1886551693640 [[10, 11], 20]
1886551693704 [[10, 11], 20]
1886551693384 [[10], 20]
```

可见，还是使用 `copy.deepcopy` 最保险。

<span style="color:red;">再琢磨下。</span>


有一个比较经典的问问题，`[[0] * 3] * 3` 的问题：


```py
# 一维情况下是赋值，但是二维的时候是浅拷贝，也就是一个引用
li_2d = [[0] * 3] * 3  # 后面的乘法是做的一个引用，因此实际上是引用了三次
print(li_2d)
li_2d[0][0] = 100
print(li_2d)

li_2d = [[0] * 3 for i in range(3)]
li_2d[0][0] = 100
print(li_2d)
```

输出：

```text
[[0, 0, 0], [0, 0, 0], [0, 0, 0]]
[[100, 0, 0], [100, 0, 0], [100, 0, 0]]
[[100, 0, 0], [0, 0, 0], [0, 0, 0]]
```

从上面的例子可以看出，一维的时候 `[0]*3` 这样的每个是不重复的，但是 `[[0,0,0]]*3` 这样生成的二维的列表，实际上每一行都是指到同一块 `[0,0,0]` 上的，因此对 `[0][0]` 的修改会造成三处显示的数同时变化。

即：

```py
a = [[0, 0, 0]] * 3
print(a)
a[0][0] = 1
print(a)
```

输出：

```
[[0, 0, 0], [0, 0, 0], [0, 0, 0]]
[[1, 0, 0], [1, 0, 0], [1, 0, 0]]
```



# 相关

- [Python基础教程 w3cschool](https://www.w3cschool.cn/Python/)
- [Python 3 教程 菜鸟教程](http://www.runoob.com/Python3/Python3-tutorial.html)
