---
title: 43 余弦距离与欧式距离
toc: true
date: 2019-08-27
---


## 结合你的学习和研究经历，探讨为什么在一些场景中要使用余弦相似度而不是欧氏距离？

<span style="color:red;">是的，关于这个之前一直有些疑问。</span>

余弦相似度，余弦距离，欧氏距离，距离的定义

对于两个向量 A 和 B，其余弦相似度定义为 $cos(A,B)=\frac{A\cdot B}{||A||_2||B||_2}$，即两个向量夹角的余弦，关注的是向量之间的角度关系，并不关心它们的绝对大小，其取值范围是 `[−1，1]`。

当一对文本相似度的长度差距很大、但内容相近时，如果使用词频或词向量作为特征，它们在特征空间中的的欧氏距离通常很大；而如果使用余弦相似度的话，它们之间的夹角可能很小，因而相似度高。<span style="color:red;">为什么在特征空间中，欧式距离会很大，但是余弦相似度没有那么大？这个地方没有特别理解，到底区别在哪里？</span>

此外，在文本、图像、视频等领域，研究的对象的特征维度往往很高，余弦相似度在高维情况下依然保持 “相同时为 1，正交时为 0，相反时为−1” 的性质，而欧氏距离的数值则受维度的影响，范围不固定，并且含义也比较模糊。<span style="color:red;">是的，这个倒是</span>


在一些场景，例如 Word2Vec 中，其向量的模长是经过归一化的，此时欧氏距离与余弦距离有着单调的关系，即：

$$||A-B||_2=\sqrt{2(1-cos(A,B))}$$

其中 $||A−B||_2$ 表示欧氏距离，$cos(A,B)$ 表示余弦相似度，$(1−cos(A,B))$ 表示余弦距离。在此场景下，如果选择距离最小（相似度最大）的近邻，那么使用余弦相似度和欧氏距离的结果是相同的。<span style="color:red;">有点不是特别清楚。要弄清楚。</span>


总体来说，欧氏距离体现数值上的绝对差异，而余弦距离体现方向上的相对差异。

例如，统计两部剧的用户观看行为，用户 A 的观看向量为（0，1），用户 B 为（1，0）；此时二者的余弦距离很大，而欧氏距离很小；我们分析两个用户对于不同视频的偏好，更关注相对差异，显然应当使用余弦距离。<span style="color:red;">分析两个用户对于不同视频的偏好？没有很明白为什么这个地方适应余弦距离。</span>

而当我们分析用户活跃度，以登陆次数（单位：次）和平均观看时长（单位：分钟）作为特征时，余弦距离会认为（1，10）、（10，100）两个用户距离很近；但显然这两个用户活跃度是有着极大差异的，此时我们更关注数值绝对差异，应当使用欧氏距离。<span style="color:red;">嗯。</span>

特定的度量方法适用于什么样的问题，需要在学习和研究中多总结和思考，这样不仅仅对面试有帮助，在遇到新的问题时也可以活学活用。







# 相关

- 《百面机器学习》
