---
title: 02 混合持久化
toc: true
date: 2019-07-02
---
9.2 混合持久化
Neal Ford在 2006 年推出了一个类似的术语：多语言编程。他用它来说明一个事实，即没有一个适合所有解决方案的东西，并主张使用更适合特定问题的多种编程语言混合编程。
在并行的数据世界中，任何希望保持竞争力的业务都需要适应一系列技术，使其能够在最短的时间内解决问题，从而最大限度地降低成本。
在 Hadoop 文件中存储事务数据是可行的，但没有任何意义。另一方面，使用关系数据库管理系统（RDBMS）来处理 PB 数量的互联网日志也是不明智的。这些工具被设计成解决特定类型的任务；即使可以被选择来解决其他问题，调整工具的成本也是巨大的。这等同于试图在圆孔中安装一个方形钉。
例如，考虑一个在线销售乐器和配件的公司（在商店网络中）。在高层次上，为了成功企业需要解决一些问题：
1.吸引顾客到其商店（虚拟的和物理的）。
2.给他们展示相关产品（你不会试图向钢琴家出售架子鼓，你会吗！？）
3.一旦他们决定购买，处理付款和组织运输。
为了解决这些问题，公司可能会从用于解决这些问题的许多可用技术中进行选择：
1.将所有产品存储在基于文档的数据库中，如 MongoDB、Cassandra、DynamoDB或 DocumentDB。文档数据库具有多种优势：灵活的模式，分片（将更大的数据库分成一组更小、更易于管理的数据库），相对于其他数据库的高可用性和复制等。
2.使用基于图形的数据库（如 Neo4j、Tinkerpop/Gremlin或 GiaphFrames for Spark）对推荐进行建模：这些数据库反映了客户之间的事实和抽象关系及其偏好。挖掘这样的图形是非常宝贵的，并且可以为客户产生更加合适的产品。
3.为了搜索，公司可能会使用为搜索量身定制的解决方案，如 Apache Solr或 ElasticSearch。这样的解决方案提供了快速、带索引的文本搜索功能。
4.一旦产品销售，交易通常具有良好的结构化模式（例如产品名称、价格等）。为了存储这些数据（以及之后的流程和报告），关系型数据库是最适合的。
使用混合持久化，公司总是可以为正确的工作选择正确的工具，而不是试图强制使用单一技术来解决所有问题。
正如我们将看到的，Blaze会抽象出这些技术，并引入一个简单的 API 来处理。所以你不必学习要使用的每种技术的 API。实质上，这是一个混合持久化的很好的工作实例。请参阅 http://www.slideshare.net/Couchbase/couchbase-at-ebay-2014或者 http://www.slideshare.net/bijoor1/case-study-polyglot-persistence-in-pharmaceutical-industry来看一下别人是怎么做到这一点的。9.
