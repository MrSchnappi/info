---
title: 12 FPN
toc: true
date: 2018-09-22
---
# FPN

2017年 Facebook 的 Tsung-Yi Lin 等提出了 FPN 算法，利用不同层的特征图进行不同尺寸的目标预测。原来多数的目标检测算法都是只采用深层特征做预测，低层的特征语义信息比较少，但是目标位置准确；高层的特征语义信息比较丰富，但是目标位置比较粗略。另外虽然也有些算法采用多尺度特征融合的方式，但是一般是采用融合后的特征做预测，而 FPN 算法不一样的地方在于预测是在不同特征层独立进行的，利用深层特征通过上采样和低层特征做融合。

FPN 算法主网络是 ResNet，结构主要是一个自底向上的线路横向连接一个自顶向下的线路。自底向上其实就是网络的前向过程，在前向过程中，feature map 的大小在经过某些层后会改变，而在经过其他一些层的时候不会改变，FPN 算法将不改变 feature map 大小的层归为一个 stage，因此每次抽取的特征都是每个 stage 的最后一个层输出，这样就能构成特征金字塔。自顶向下的过程采用上采样进行，而横向连接则是将上采样的结果和自底向上生成的相同大小的 feature map 并一一对应进行融合，在融合之后还会再采用 3×3 的卷积核对每个融合结果进行卷积，目的是消除上采样的混叠效应。
